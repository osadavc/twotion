datasource db {
  provider             = "mysql"
  url                  = env("DATABASE_URL")
  referentialIntegrity = "prisma"
}

generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["referentialIntegrity"]
}

model User {
  id             String              @id
  name           String?
  image          String?
  notion         NotionOAuthOptions?
  TwitterThreads TwitterThreads[]
}

model NotionOAuthOptions {
  workspaceId   String @unique
  workspaceName String
  accessToken   String
  botId         String
  owner         Json
  User          User   @relation(fields: [workspaceId], references: [id])

  databaseId String?  @unique
  pageSlug   String?  @unique
  error      Boolean?
}

model TwitterThreads {
  id           String  @id
  User         User    @relation(fields: [id], references: [id])
  Tweets       Tweet[]
  notionPageId String? @unique
}

model Tweet {
  id     String        @id @default(cuid())
  text   String
  images TweetImages[]

  TwitterThreads   TwitterThreads? @relation(fields: [twitterThreadsId], references: [id])
  twitterThreadsId String?
}

model TweetImages {
  id      String  @id @default(cuid())
  imageId String
  Tweet   Tweet?  @relation(fields: [tweetId], references: [id])
  tweetId String?
}
